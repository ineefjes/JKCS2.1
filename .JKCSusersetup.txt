##########################################################################################
############################## USER SETUP ################################################
##########################################################################################

##########################
### Output style setup ###			
##########################

# Do you want colorful output? [1/0]
Qcolours=1
# Do you want the program symbol? [1/0]
Qsymbol=1

#########################
### Paths declaration ###
#########################

PATH_ABCluster="/wrk/kubeckaj/DONOTREMOVE/Apps/ABCluster-Linux2.0/rigidmol-optimizer"
PATH_XTB="/wrk/kubeckaj/DONOTREMOVE/Apps/XTB6.0/"

###################################
### Default supercomputer setup ###
###################################

function echo_SCpartition {
  echo """######################################################
## MAXTASKS CPU NODES REQ.TIME  PARTITION MEMPERCPU ##
======================================================
ABC  NoC     1    1   72:00:00   serial     4000
XTB  NoC     1    1   72:00:00   serial     4000
DFT  100     8    1   72:00:00   serial     4000
CC   100     8    1   330:00:00  longrun    4000
-loc 1       1    1   -          -          -
======================================================"""
}

##########################################################################################
########################## ADVANCED USER SETUP ###########################################
##########################################################################################

##########################################################################################
# ABCluster script paths: rigidmol-optimizer 
# abcluster uses OpenMP. Use all available CPU, unless OMP_NUM_THREADS is specified.
##########################################################################################
function program_ABC {
  input=$1                             # $name.inp
  output=$(basename $input .inp).out   # $name.out
 
  #path to the script
  rigidmoloptimizer=$PATH_ABCluster
 
  #performing the calculation 
  $rigidmoloptimizer $input > $output 
}
##########################################################################################
##########################################################################################
# GNF2-xTB script: xtb
# xtb uses OMP parallelization. Use all available CPU, unless OMP_NUM_THREADS is specified.
##########################################################################################
function program_XTB {
  input=$1                     # file.xyz    
  base=$(basename $input .xyz) # file
  output=$base.log             # file.log
  args=${@:2}                  # all arguments except the first one

  export XTBHOME=$PATH_XTB
  export PATH=$PATH:${XTBHOME}/bin:${XTBHOME}/scripts
 
  #CREATING WORKING DIRECTORY
  if [ ! -d $WRKDIR/TMP ]; then mkdir $WRKDIR/TMP; fi
  ADD=""
  test=0
  while [ $test -eq 0 ]
  do
    XTB_NAME=$WRKDIR/TMP/XTB_${SLURM_JOBID}${ADD}
    if [ -d $XTB_NAME ]; then ADD="_${RANDOM}"
    else test=1;fi     
  done
 
  #ENTERING TO WORKING DIRECTORY AND PERFORMING CALCULATION
  DIR=$PWD
  mkdir $XTB_NAME
  cp $input $XTB_NAME
  cd $XTB_NAME
  $XTBHOME/bin/xtb $input $args > $output

  #COPYING RESULTS BACK
  cp $output $DIR/
  if [ -e xtbopt.xyz ]
  then
   cp xtbopt.xyz $DIR/$base.xyz
  fi

  #CLEANING
  cd $DIR
  rm -rf $XTB_NAME
}
##########################################################################################
##########################################################################################
# Python2
#
##########################################################################################
function program_PYTHON2 {
  python ${@}
}
##########################################################################################
##########################################################################################
# sbatch
# command: sbatch [some_parameters] $SBATCHuseradd script
##########################################################################################
SBATCHuseradd=""
##########################################################################################
